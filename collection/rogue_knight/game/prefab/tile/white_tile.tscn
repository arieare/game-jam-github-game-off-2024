[gd_scene load_steps=16 format=3 uid="uid://d0yweq0pamhbs"]

[ext_resource type="Shader" path="res://content/shader/grass_terrain.gdshader" id="1_5tclv"]
[ext_resource type="Script" path="res://collection/rogue_knight/game/prefab/tile/tile.gd" id="1_f3e6m"]
[ext_resource type="Texture2D" uid="uid://w37wp7igg70c" path="res://content/sprite/grass_square_curved.png" id="2_p36t0"]

[sub_resource type="Shader" id="Shader_4ymdl"]
resource_local_to_scene = true
code = "shader_type spatial;

uniform vec4 aura_color : source_color = vec4(2.0, 1.0, 0.0, 0.09);
uniform float aura_thickness : hint_range(0.01, 0.1) = 0.01;
uniform bool apply_to_mesh = true;
uniform float pulse_speed : hint_range(0.1, 5.0) = 1.0;
uniform float pulse_strength : hint_range(0.0, 1.0) = 0.2;

void vertex() {
    if (apply_to_mesh) {
        VERTEX = VERTEX + NORMAL * aura_thickness;
    }
}

void fragment() {
    float time = TIME * pulse_speed;
    float pulse_factor = sin(time) * 0.5 + 0.5;

    vec4 dynamic_aura_color = aura_color * (1.0 + pulse_strength * pulse_factor);

    ALBEDO = dynamic_aura_color.rgb;
    ALPHA = dynamic_aura_color.a;

    EMISSION = dynamic_aura_color.rgb * 2.0;
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_21up5"]
resource_local_to_scene = true
render_priority = 0
shader = SubResource("Shader_4ymdl")
shader_parameter/aura_color = Color(1, 0.5, 0, 0)
shader_parameter/aura_thickness = 0.01
shader_parameter/apply_to_mesh = false
shader_parameter/pulse_speed = 5.0
shader_parameter/pulse_strength = 0.3

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_vs5x8"]
resource_local_to_scene = true
next_pass = SubResource("ShaderMaterial_21up5")
albedo_color = Color(0.95, 0.92625, 0.8075, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_oplrh"]
size = Vector2(0.3, 0.3)

[sub_resource type="Gradient" id="Gradient_w6v8h"]
offsets = PackedFloat32Array(0.0598086, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_alpqa"]
noise_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_s4ty0"]
seamless = true
color_ramp = SubResource("Gradient_w6v8h")
noise = SubResource("FastNoiseLite_alpqa")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_13isb"]
noise_type = 3
frequency = 0.0287

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_rbllh"]
seamless = true
noise = SubResource("FastNoiseLite_13isb")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wgpd6"]
render_priority = 0
shader = ExtResource("1_5tclv")
shader_parameter/top_color = Color(0.71, 0.71, 0.71, 1)
shader_parameter/bottom_color = Color(1, 1, 1, 1)
shader_parameter/color_noise = SubResource("NoiseTexture2D_s4ty0")
shader_parameter/noise_scale = 20.0
shader_parameter/wind_direction = Vector3(1, 1, 1)
shader_parameter/wind_strength = 0.1
shader_parameter/wind_noise = SubResource("NoiseTexture2D_rbllh")
shader_parameter/wind_noise_size = 0.05
shader_parameter/wind_noise_speed = 0.05
shader_parameter/albedo = Color(1, 1, 1, 1)
shader_parameter/texture_albedo = ExtResource("2_p36t0")
shader_parameter/point_size = 1.0
shader_parameter/roughness = 0.0
shader_parameter/metallic_texture_channel = null
shader_parameter/specular = 0.5
shader_parameter/metallic = 0.0
shader_parameter/uv1_scale = Vector3(1, 1, 1)
shader_parameter/uv1_offset = Vector3(0, 0, 0)
shader_parameter/uv2_scale = Vector3(1, 1, 1)
shader_parameter/uv2_offset = Vector3(0, 0, 0)

[sub_resource type="QuadMesh" id="QuadMesh_dfnpf"]
material = SubResource("ShaderMaterial_wgpd6")
size = Vector2(0.2, 0.2)

[sub_resource type="MultiMesh" id="MultiMesh_4ymdl"]
transform_format = 1
instance_count = 128
mesh = SubResource("QuadMesh_dfnpf")
buffer = PackedFloat32Array(-0.22404, 0, 1.98842, -0.0065176, 0, 2.001, 0, -0.7, -1.98842, 0, -0.22404, -0.14721, 0.96896, 0, -1.75075, 0.0843159, 0, 2.001, 0, -0.7, 1.75075, 0, 0.96896, 0.0976158, -1.63767, 0, 1.1498, -0.00422181, 0, 2.001, 0, -0.7, -1.1498, 0, -1.63767, 0.144279, -0.556263, 0, -1.92213, 0.139701, 0, 2.001, 0, -0.7, 1.92213, 0, -0.556263, -0.113451, -1.82916, 0, -0.811269, -0.0463696, 0, 2.001, 0, -0.7, 0.811269, 0, -1.82916, -0.117236, 0.704854, 0, -1.87275, -0.110766, 0, 2.001, 0, -0.7, 1.87275, 0, 0.704854, 0.0971602, 1.4593, 0, -1.3691, -0.11294, 0, 2.001, 0, -0.7, 1.3691, 0, 1.4593, 0.0817897, 0.503886, 0, 1.93652, 0.128968, 0, 2.001, 0, -0.7, -1.93652, 0, 0.503886, -0.149171, -0.224761, 0, 1.98834, -0.0474523, 0, 2.001, 0, -0.7, -1.98834, 0, -0.224761, 0.00482458, 1.80898, 0, 0.855329, -0.129717, 0, 2.001, 0, -0.7, -0.855329, 0, 1.80898, 0.133467, -1.70006, 0, -1.05537, 0.129755, 0, 2.001, 0, -0.7, 1.05537, 0, -1.70006, 0.0984312, -0.824532, 0, -1.82322, 0.0585743, 0, 2.001, 0, -0.7, 1.82322, 0, -0.824532, 0.103889, -1.35713, 0, -1.47044, 0.110019, 0, 2.001, 0, -0.7, 1.47044, 0, -1.35713, 0.117745, -1.55195, 0, 1.26312, 0.114784, 0, 2.001, 0, -0.7, -1.26312, 0, -1.55195, -0.0455466, -0.0342684, 0, 2.00071, 0.071563, 0, 2.001, 0, -0.7, -2.00071, 0, -0.0342684, -0.028984, 1.5096, 0, -1.31344, -0.0939301, 0, 2.001, 0, -0.7, 1.31344, 0, 1.5096, -0.0111019, 0.9009, 0, 1.78672, -0.0166167, 0, 2.001, 0, -0.7, -1.78672, 0, 0.9009, -0.148205, -0.38841, 0, -1.96294, 0.116169, 0, 2.001, 0, -0.7, 1.96294, 0, -0.38841, 0.0691185, -0.743065, 0, 1.85792, 0.0485347, 0, 2.001, 0, -0.7, -1.85792, 0, -0.743065, -0.0691727, 1.19354, 0, 1.60607, -0.0329021, 0, 2.001, 0, -0.7, -1.60607, 0, 1.19354, 0.0826671, -0.710643, 0, -1.87056, -0.0457852, 0, 2.001, 0, -0.7, 1.87056, 0, -0.710643, -0.0327258, 1.63067, 0, 1.15971, -0.0293451, 0, 2.001, 0, -0.7, -1.15971, 0, 1.63067, -0.0511714, 0.0203426, 0, -2.0009, -0.0533412, 0, 2.001, 0, -0.7, 2.0009, 0, 0.0203426, 0.124219, -0.927362, 0, -1.77313, -0.132816, 0, 2.001, 0, -0.7, 1.77313, 0, -0.927362, 0.0727987, 1.45999, 0, -1.36837, 0.0949558, 0, 2.001, 0, -0.7, 1.36837, 0, 1.45999, -0.144694, -1.3955, 0, 1.43408, -0.145195, 0, 2.001, 0, -0.7, -1.43408, 0, -1.3955, 0.128034, -1.5964, 0, 1.20644, -0.107694, 0, 2.001, 0, -0.7, -1.20644, 0, -1.5964, 0.11632, -1.74683, 0, -0.975998, -0.0390825, 0, 2.001, 0, -0.7, 0.975998, 0, -1.74683, 0.141305, -1.78242, 0, -0.909376, -0.144868, 0, 2.001, 0, -0.7, 0.909376, 0, -1.78242, -0.0692303, 0.570854, 0, 1.91784, -0.0369658, 0, 2.001, 0, -0.7, -1.91784, 0, 0.570854, 0.0201497, -0.139311, 0, -1.99614, 0.0299176, 0, 2.001, 0, -0.7, 1.99614, 0, -0.139311, -0.0707443, 1.98928, 0, -0.21629, -0.0404497, 0, 2.001, 0, -0.7, 0.21629, 0, 1.98928, -0.0092473, 1.40965, 0, -1.42017, 0.149314, 0, 2.001, 0, -0.7, 1.42017, 0, 1.40965, -0.0771525, 1.73459, 0, 0.997596, -0.131062, 0, 2.001, 0, -0.7, -0.997596, 0, 1.73459, 0.00642661, -1.32049, 0, -1.50343, -0.06882, 0, 2.001, 0, -0.7, 1.50343, 0, -1.32049, 0.00404139, -0.677032, 0, 1.88298, 0.0604479, 0, 2.001, 0, -0.7, -1.88298, 0, -0.677032, 0.0600024, -0.933207, 0, -1.77006, 0.0781822, 0, 2.001, 0, -0.7, 1.77006, 0, -0.933207, -0.140312, 0.990761, 0, -1.7385, 0.0680972, 0, 2.001, 0, -0.7, 1.7385, 0, 0.990761, -0.116341, 1.46788, 0, -1.3599, 0.0880288, 0, 2.001, 0, -0.7, 1.3599, 0, 1.46788, 0.0304681, 1.49611, 0, -1.32878, 0.106335, 0, 2.001, 0, -0.7, 1.32878, 0, 1.49611, 0.0216466, 2.00087, 0, 0.022748, 0.090789, 0, 2.001, 0, -0.7, -0.022748, 0, 2.00087, -0.0719539, 0.483594, 0, -1.94168, -0.0105067, 0, 2.001, 0, -0.7, 1.94168, 0, 0.483594, 0.070204, -1.7271, 0, -1.01051, 0.0776303, 0, 2.001, 0, -0.7, 1.01051, 0, -1.7271, 0.143642, 1.99048, 0, -0.204879, -0.0865732, 0, 2.001, 0, -0.7, 0.204879, 0, 1.99048, -0.126135, 1.64836, 0, -1.13442, 0.0619284, 0, 2.001, 0, -0.7, 1.13442, 0, 1.64836, -0.104639, 1.99226, 0, 0.186844, 0.0156827, 0, 2.001, 0, -0.7, -0.186844, 0, 1.99226, -0.02291, 1.39562, 0, -1.43396, -0.0302943, 0, 2.001, 0, -0.7, 1.43396, 0, 1.39562, -0.0357513, 0.0650019, 0, 1.99994, -0.137458, 0, 2.001, 0, -0.7, -1.99994, 0, 0.0650019, -0.0515711, -1.39402, 0, -1.43551, 0.109888, 0, 2.001, 0, -0.7, 1.43551, 0, -1.39402, -0.100313, 1.87867, 0, 0.68891, 0.0473064, 0, 2.001, 0, -0.7, -0.68891, 0, 1.87867, -0.11416, -1.71501, 0, 1.0309, -0.129638, 0, 2.001, 0, -0.7, -1.0309, 0, -1.71501, 0.0307887, -0.380152, 0, -1.96456, -0.0856883, 0, 2.001, 0, -0.7, 1.96456, 0, -0.380152, -0.050422, 1.82743, 0, 0.815159, -0.00874919, 0, 2.001, 0, -0.7, -0.815159, 0, 1.82743, -0.0252759, -0.719072, 0, 1.86733, 0.11178, 0, 2.001, 0, -0.7, -1.86733, 0, -0.719072, 0.133023, 1.80226, 0, -0.869399, 0.0848555, 0, 2.001, 0, -0.7, 0.869399, 0, 1.80226, 0.034229, -1.70627, 0, -1.04529, 0.124809, 0, 2.001, 0, -0.7, 1.04529, 0, -1.70627, -0.0127254, 1.85069, 0, -0.760874, -0.140301, 0, 2.001, 0, -0.7, 0.760874, 0, 1.85069, -0.140972, 0.443866, 0, -1.95115, 0.00240061, 0, 2.001, 0, -0.7, 1.95115, 0, 0.443866, 0.0997894, 0.2058, 0, 1.99039, 0.129972, 0, 2.001, 0, -0.7, -1.99039, 0, 0.2058, 0.098361, 1.06925, 0, 1.69136, 0.11394, 0, 2.001, 0, -0.7, -1.69136, 0, 1.06925, -0.0222239, 1.68046, 0, 1.08631, -0.148717, 0, 2.001, 0, -0.7, -1.08631, 0, 1.68046, -0.126292, -1.107, 0, 1.6669, 0.00675179, 0, 2.001, 0, -0.7, -1.6669, 0, -1.107, 0.139679, -0.159068, 0, -1.99467, -0.137126, 0, 2.001, 0, -0.7, 1.99467, 0, -0.159068, -0.0125396, -1.84749, 0, 0.768611, 0.0373884, 0, 2.001, 0, -0.7, -0.768611, 0, -1.84749, 0.0199134, -1.99341, 0, -0.174115, -0.0930795, 0, 2.001, 0, -0.7, 0.174115, 0, -1.99341, 0.116725, 1.85424, 0, -0.752199, 0.031473, 0, 2.001, 0, -0.7, 0.752199, 0, 1.85424, 0.136989, -1.12994, 0, -1.65143, 0.149356, 0, 2.001, 0, -0.7, 1.65143, 0, -1.12994, -0.149341, -1.97797, 0, -0.30269, 0.0293022, 0, 2.001, 0, -0.7, 0.30269, 0, -1.97797, -0.0744421, -0.0915676, 0, -1.9989, 0.0860494, 0, 2.001, 0, -0.7, 1.9989, 0, -0.0915676, -0.139468, 0.319624, 0, -1.97531, 0.109033, 0, 2.001, 0, -0.7, 1.97531, 0, 0.319624, 0.0998448, -1.47015, 0, 1.35745, 0.117828, 0, 2.001, 0, -0.7, -1.35745, 0, -1.47015, 0.0446756, -1.69363, 0, 1.06565, 0.146366, 0, 2.001, 0, -0.7, -1.06565, 0, -1.69363, 0.0389871, -0.876565, 0, 1.79879, -0.143499, 0, 2.001, 0, -0.7, -1.79879, 0, -0.876565, 0.108829, -0.735145, 0, 1.86106, 0.0756944, 0, 2.001, 0, -0.7, -1.86106, 0, -0.735145, 0.0684927, -1.44988, 0, -1.37908, -0.131, 0, 2.001, 0, -0.7, 1.37908, 0, -1.44988, -0.0945464, 2.00089, 0, 0.0212894, 0.00713472, 0, 2.001, 0, -0.7, -0.0212894, 0, 2.00089, 0.0534507, 0.38322, 0, -1.96396, -0.0708915, 0, 2.001, 0, -0.7, 1.96396, 0, 0.38322, -0.0087531, -0.991986, 0, 1.7378, 0.115768, 0, 2.001, 0, -0.7, -1.7378, 0, -0.991986, -0.0506913, -0.585934, 0, -1.91329, -0.0481313, 0, 2.001, 0, -0.7, 1.91329, 0, -0.585934, -0.0399346, 0.277445, 0, 1.98167, 0.131344, 0, 2.001, 0, -0.7, -1.98167, 0, 0.277445, -0.0684432, -1.13403, 0, -1.64863, 0.0756568, 0, 2.001, 0, -0.7, 1.64863, 0, -1.13403, -0.0758708, 1.37458, 0, 1.45414, 0.0342808, 0, 2.001, 0, -0.7, -1.45414, 0, 1.37458, -0.1131, 1.74353, 0, 0.981883, -0.0274332, 0, 2.001, 0, -0.7, -0.981883, 0, 1.74353, 0.00570123, 2.00089, 0, -0.0214034, -0.0384991, 0, 2.001, 0, -0.7, 0.0214034, 0, 2.00089, -0.0881855, -0.901227, 0, 1.78656, -0.0794426, 0, 2.001, 0, -0.7, -1.78656, 0, -0.901227, -0.0513077, 1.54355, 0, -1.27336, -0.121324, 0, 2.001, 0, -0.7, 1.27336, 0, 1.54355, 0.108984, -1.94079, 0, 0.487174, -0.148511, 0, 2.001, 0, -0.7, -0.487174, 0, -1.94079, 0.092314, 1.86704, 0, 0.719837, 0.0565289, 0, 2.001, 0, -0.7, -0.719837, 0, 1.86704, 0.00745042, -0.312887, 0, 1.97639, -0.0804701, 0, 2.001, 0, -0.7, -1.97639, 0, -0.312887, 0.125737, -1.5263, 0, -1.29399, 0.111954, 0, 2.001, 0, -0.7, 1.29399, 0, -1.5263, -0.0790344, 1.72129, 0, 1.02038, -0.0531268, 0, 2.001, 0, -0.7, -1.02038, 0, 1.72129, -0.0440685, 0.380623, 0, -1.96447, -0.10044, 0, 2.001, 0, -0.7, 1.96447, 0, 0.380623, -0.0976703, -0.0137843, 0, 2.00095, 0.0416151, 0, 2.001, 0, -0.7, -2.00095, 0, -0.0137843, 0.0817347, 1.94459, 0, -0.471773, 0.124499, 0, 2.001, 0, -0.7, 0.471773, 0, 1.94459, 0.0666659, -0.19528, 0, 1.99145, 0.0236357, 0, 2.001, 0, -0.7, -1.99145, 0, -0.19528, 0.00903132, -1.73364, 0, -0.999244, -0.113884, 0, 2.001, 0, -0.7, 0.999244, 0, -1.73364, 0.143268, 1.99291, 0, -0.179724, -0.0914492, 0, 2.001, 0, -0.7, 0.179724, 0, 1.99291, 0.0357738, 1.99791, 0, 0.111217, -0.0374935, 0, 2.001, 0, -0.7, -0.111217, 0, 1.99791, 0.142562, -0.379719, 0, 1.96464, 0.0579384, 0, 2.001, 0, -0.7, -1.96464, 0, -0.379719, -0.125619, -0.617091, 0, -1.90347, 0.0551902, 0, 2.001, 0, -0.7, 1.90347, 0, -0.617091, 0.0395416, -0.543822, 0, -1.92568, 0.0036088, 0, 2.001, 0, -0.7, 1.92568, 0, -0.543822, 0.0869887, -1.37745, 0, -1.45143, 0.00618818, 0, 2.001, 0, -0.7, 1.45143, 0, -1.37745, 0.084389, 1.14505, 0, 1.64099, -0.122601, 0, 2.001, 0, -0.7, -1.64099, 0, 1.14505, -0.0136739, -1.84847, 0, 0.766271, 0.0750512, 0, 2.001, 0, -0.7, -0.766271, 0, -1.84847, -0.000873692, 0.608152, 0, 1.90635, -0.104619, 0, 2.001, 0, -0.7, -1.90635, 0, 0.608152, 0.0648025, -0.653819, 0, -1.89117, -0.0113047, 0, 2.001, 0, -0.7, 1.89117, 0, -0.653819, 0.145545, 0.946688, 0, -1.76289, -0.149538, 0, 2.001, 0, -0.7, 1.76289, 0, 0.946688, 0.0788193, 1.69737, 0, -1.05969, -0.0571555, 0, 2.001, 0, -0.7, 1.05969, 0, 1.69737, -0.142139, 1.77001, 0, 0.933306, 0.0528647, 0, 2.001, 0, -0.7, -0.933306, 0, 1.77001, 0.0279394, 1.24909, 0, 1.56326, -0.0483264, 0, 2.001, 0, -0.7, -1.56326, 0, 1.24909, -0.14282, 1.82695, 0, 0.816248, 0.0329145, 0, 2.001, 0, -0.7, -0.816248, 0, 1.82695, 0.147826, -1.26101, 0, -1.55366, -0.117942, 0, 2.001, 0, -0.7, 1.55366, 0, -1.26101, -0.0374701, -1.55208, 0, 1.26295, 0.062993, 0, 2.001, 0, -0.7, -1.26295, 0, -1.55208, 0.027055, 0.709201, 0, -1.87111, 0.130717, 0, 2.001, 0, -0.7, 1.87111, 0, 0.709201, 0.0753496, 1.93711, 0, -0.501618, -0.0744708, 0, 2.001, 0, -0.7, 0.501618, 0, 1.93711, -0.0128019, 0.961444, 0, -1.75489, 0.0236766, 0, 2.001, 0, -0.7, 1.75489, 0, 0.961444, -0.127596, 1.78272, 0, 0.90879, 0.115554, 0, 2.001, 0, -0.7, -0.90879, 0, 1.78272, -0.107806, -1.72986, 0, -1.00577, -0.0605871, 0, 2.001, 0, -0.7, 1.00577, 0, -1.72986, 0.138296, -0.344532, 0, -1.97112, 0.0544934, 0, 2.001, 0, -0.7, 1.97112, 0, -0.344532, -0.0457168, -1.11798, 0, 1.65955, 0.0872557, 0, 2.001, 0, -0.7, -1.65955, 0, -1.11798, 0.0549737, -1.68045, 0, -1.08632, 0.103981, 0, 2.001, 0, -0.7, 1.08632, 0, -1.68045, 0.0142586, 0.272586, 0, -1.98235, 0.0208871, 0, 2.001, 0, -0.7, 1.98235, 0, 0.272586, -0.0391303, -1.80924, 0, -0.854784, -0.03274, 0, 2.001, 0, -0.7, 0.854784, 0, -1.80924, 0.144453, -1.81534, 0, -0.841746, 0.11046, 0, 2.001, 0, -0.7, 0.841746, 0, -1.81534, 0.109718, 0.626748, 0, -1.90031, -0.00212256, 0, 2.001, 0, -0.7, 1.90031, 0, 0.626748, -0.0391276, 1.66016, 0, -1.11709, -0.0237006, 0, 2.001, 0, -0.7, 1.11709, 0, 1.66016, 0.0232031, -1.25166, 0, -1.5612, -0.0317074, 0, 2.001, 0, -0.7, 1.5612, 0, -1.25166, 0.134227, -1.81051, 0, 0.852083, 0.118579, 0, 2.001, 0, -0.7, -0.852083, 0, -1.81051, 0.0301778)

[node name="white_tile" type="CSGBox3D" node_paths=PackedStringArray("feature_grass") groups=["board"]]
use_collision = true
size = Vector3(0.5, 0.1, 0.5)
material = SubResource("StandardMaterial3D_vs5x8")
script = ExtResource("1_f3e6m")
feature_grass = NodePath("grass")

[node name="grass" type="Node3D" parent="."]
visible = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="grass"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
visible = false
mesh = SubResource("PlaneMesh_oplrh")
skeleton = NodePath("../../root/@EditorNode@17800/@Panel@13/@VBoxContainer@14/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@25/DockVSplitCenter/@VSplitContainer@52/@VBoxContainer@53/@EditorMainScreen@98/MainScreen/@CanvasItemEditor@9915/@VSplitContainer@9737/@HSplitContainer@9739/@HSplitContainer@9741/@Control@9742/@SubViewportContainer@9743/@SubViewport@9744/white_tile")

[node name="MultiMeshInstance3D" type="MultiMeshInstance3D" parent="grass"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.85, 0)
cast_shadow = 0
multimesh = SubResource("MultiMesh_4ymdl")
